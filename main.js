(()=>{"use strict";var e=document.querySelector(".page"),t=document.querySelectorAll(".popup"),o=e.querySelector(".profile"),r=o.querySelector(".edit-button"),n=o.querySelector(".add-button"),i=o.querySelector(".profile__title"),a=o.querySelector(".profile__subtitle"),c=e.querySelector("#profile-form"),u=(c.querySelector(".popup__close-button"),c.querySelector('.popup__field[name="profile-description"]')),l=c.querySelector('.popup__field[name="profile-name"]'),p=c.querySelector(".popup__form"),s=e.querySelector("#add-card-form"),f=(s.querySelector(".popup__close-button"),s.querySelector('.popup__field[name="card-name"]')),d=s.querySelector('.popup__field[name="card-link"]'),_=s.querySelector(".popup__submit[name=card-save-button]"),m=s.querySelector(".popup__form"),v=e.querySelector("#picture-popup"),y=v.querySelector(".popup__image"),b=v.querySelector(".popup__label"),q=(v.querySelector(".popup__close-button"),e.querySelector(".place-cards")),x=document.querySelector("#place-card").content;function S(t){t.classList.add("popup_opened"),e.addEventListener("keydown",h)}function w(t){t.classList.remove("popup_opened"),e.removeEventListener("keydown",h)}function h(t){"Escape"===t.key&&w(e.querySelector(".popup_opened"))}function L(e,t){var o=x.querySelector(".card").cloneNode(!0),r=o.querySelector(".card__picture");return o.querySelector(".card__title").textContent=e,r.src=t,r.alt=e,o.querySelector(".like-icon").addEventListener("click",(function(e){e.target.classList.toggle("like-icon_active")})),o.querySelector(".trash-button").addEventListener("click",(function(e){o.remove()})),r.addEventListener("click",(function(e){S(v),y.src=e.target.src,y.alt=e.target.alt,b.textContent=e.target.alt})),o}var M,g=function(e,t,o){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(o.inactiveButton),t.disabled=!1):(t.classList.add(o.inactiveButton),t.disabled=!0)};[{title:"Камчатка",link:"https://images.unsplash.com/photo-1568028476727-0c86534220fa?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1931&q=80"},{title:"Тульская область",link:"https://images.unsplash.com/photo-1609252880721-0d953278bcda?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2835&q=80"},{title:"Крым",link:"https://images.unsplash.com/photo-1565342403917-671ac824577c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1810&q=80"},{title:"Байкал",link:"https://images.unsplash.com/photo-1548130516-2ca6aaeb84b9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"},{title:"Камчатские гейзеры",link:"https://images.unsplash.com/photo-1535427284698-c8e68a1eb910?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1736&q=80"},{title:"Карелия",link:"https://images.unsplash.com/photo-1607516100924-9a3f2c801cfa?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTh8fHJ1c3NpYSUyMG5hdHVyZXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=800&q=60"}].forEach((function(e){var t=L(e.title,e.link);q.append(t)})),t.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&w(e),t.target.classList.contains("popup__close-button")&&w(e)}))})),r.addEventListener("click",(function(){S(c)})),p.addEventListener("submit",(function(e){var t,o;e.preventDefault(),t=l.value,o=u.value,i.textContent=t,a.textContent=o,w(c)})),n.addEventListener("click",(function(){S(s)})),m.addEventListener("submit",(function(e){e.preventDefault();var t=L(f.value,d.value);q.prepend(t),m.reset(),_.classList.add("popup__submit_inactive"),_.disabled=!0,w(s)})),M={form:".popup__form",input:".popup__field",button:".popup__submit",inactiveButton:"popup__submit_inactive",invalidInput:"popup__field_invalid",errorMessage:"popup__error_active"},Array.from(e.querySelectorAll(M.form)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var o=Array.from(e.querySelectorAll(t.input)),r=e.querySelector(t.button);g(o,r,t),o.forEach((function(n){n.addEventListener("input",(function(){!function(e,t,o){t.validity.valid?function(e,t,o){var r=e.querySelector("#".concat(t.name,"-span"));t.classList.remove(o.invalidInput),r.textContent="",r.classList.remove(o.errorMessage)}(e,t,o):function(e,t,o,r){var n=e.querySelector("#".concat(t.name,"-span"));t.classList.add(r.invalidInput),n.textContent=o,n.classList.add(r.errorMessage)}(e,t,t.validationMessage,o)}(e,n,t),g(o,r,t)}))}))}(e,M)}))})();